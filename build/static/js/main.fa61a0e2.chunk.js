(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,n){e.exports=n(20)},17:function(e,t,n){},18:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),r=n(11),s=n.n(r),o=(n(17),n(2)),c=(n(18),n(5)),l=n(3),u=n(7),d=n(6),h=n(4),f=n(8);var v=n(1),y=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(l.a)(this,e),this.id=Object(v.uniqueId)(),this.dead=!1,this.x=void 0,this.y=void 0,this.angle=void 0,this.velocity=void 0,this.radius=void 0,this.wraps=!0,this.maxVelocity=10,this.friction=0,this.wrap=function(e,n){var i=t.radius,a=m.width,r=m.height;return e-i>a&&(e=-i),e+i<0&&(e=a+i),n-i>r&&(n=-i),n+i<0&&(n=r+i),[e,n]},this.offScreen=function(e,n){var i=t.radius,a=m.width,r=m.height;return e-i>a||e+i<0||n-i>r||n+i<0},this.getOffsetPoint=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.angle.get(),i=t.x,a=t.y;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return n=n*Math.PI/180,[i*Math.cos(n)+e,i*Math.sin(n)+t]}(i.get(),a.get(),n,e)},this.hitTest=function(e,n){return Math.hypot(t.y.get()-n,t.x.get()-e)<t.radius},this.turn=function(e){"left"===e&&t.angle.set(t.angle.get()-4),"right"===e&&t.angle.set(t.angle.get()+4)},this.accelerate=function(){t.velocity<t.maxVelocity&&(t.velocity+=1)},this.move=function(){var e=t.wrap,n=t.friction,i=t.wraps,a=t.x,r=t.y,s=t.velocity,c=t.maxVelocity,l=t.getOffsetPoint(s),u=Object(o.a)(l,2),d=u[0],h=u[1];if(s>c&&(t.velocity*=.98),n&&(t.velocity*=1-n),i){var f=e(d,h),v=Object(o.a)(f,2);d=v[0],h=v[1]}else t.offScreen(d,h)&&t.remove();a.set(d),r.set(h)},this.start=function(){},this.update=function(){},this.remove=function(){},this.render=function(){t.dead||(t.move(),t.update())};var i=n.x,a=void 0===i?0:i,r=n.y,s=void 0===r?0:r,u=n.angle,d=void 0===u?0:u,h=n.velocity,f=void 0===h?0:h,y=n.radius,g=void 0===y?12:y,p=n.wraps,b=void 0===p||p;this.x=Object(c.b)(a),this.y=Object(c.b)(s),this.angle=Object(c.b)(d),this.radius=g,this.velocity=f,this.wraps=b},g=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(l.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this,n))).radius=2.5,e.maxVelocity=12,e.wraps=!1,e.update=function(){var t=!1;w.asteroids.forEach(function(n){t||n.hitTest(e.x.get(),e.y.get())&&(t=!0,n.break())}),t&&e.remove()},e.remove=function(){w.bullets.delete(Object(h.a)(e)),w.setBullets(new Set(w.bullets))},e}return Object(f.a)(t,e),t}(y),p=function(e){function t(){var e,n;Object(l.a)(this,t);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).dead=!1,n.friction=.08,n.maxVelocity=6,n.start=function(){w.inputs.set("w",n.accelerate),w.inputs.set("a",function(){return n.turn("left")}),w.inputs.set("d",function(){return n.turn("right")}),w.presses.set(" ",n.shoot)},n.update=function(){n.dead||(w.asteroids.forEach(function(e){n.dead||e.hitTest(n.x.get(),n.y.get())&&(n.dead=!0,e.break())}),n.dead&&w.handlePlayerDeath())},n.shoot=function(){var e=Object(h.a)(n),t=e.angle,i=e.velocity,a=n.getOffsetPoint(n.radius+3),r=Object(o.a)(a,2),s=r[0],c=r[1];w.bullets.add(new g({x:s,y:c,angle:t.get(),velocity:i+10})),w.setBullets(new Set(w.bullets))},n}return Object(f.a)(t,e),t}(y),b=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(l.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this,Object(v.defaults)(n,{velocity:Object(v.random)(.2,.5),angle:Object(v.random)(360),radius:Object(v.random)(32,128)})))).break=function(){if(e.remove(),e.radius>32){var t=Object(v.random)(.25,.75);w.asteroids.add(e.getChunk(t)),w.asteroids.add(e.getChunk(1-t)),w.setAsteroids(new Set(w.asteroids))}},e.getChunk=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,i=Object(h.a)(e),a=i.radius,r=i.velocity,s=e.getOffsetPoint(Object(v.random)(e.radius/4,e.radius/2),360*Math.random()),c=Object(o.a)(s,2);return new t({x:c[0],y:c[1],radius:a*n,velocity:1.5*r})},e.update=function(){},e.remove=function(){w.asteroids.delete(Object(h.a)(e)),w.setAsteroids(new Set(w.asteroids))},e}return Object(f.a)(t,e),t}(y),m={width:600,height:400},w=new function e(){var t=this;Object(l.a)(this,e),this.presses=new Map,this.handleKeyPress=function(e){var n=t.presses.get(e.key);n&&n()},this.inputs=new Map,this.keyBuffer=new Set([]),this.handleKeyDown=function(e){t.keyBuffer.add(e.key)},this.handleKeyUp=function(e){t.keyBuffer.delete(e.key)},this.handleKey=function(e){var n=t.inputs.get(e);n&&n()},this.lives=3,this.ship=void 0,this.bullets=void 0,this.asteroids=void 0,this.paused=!1,this.setLives=function(){return null},this.setAsteroids=function(){return null},this.setBullets=function(){return null},this.setPaused=function(){return null},this.start=function(){t.ship.start(),t.bullets.forEach(function(e){return e.start()}),t.asteroids.forEach(function(e){return e.start()}),t.loop()},this.handlePlayerDeath=function(){t.lives-=1,t.lives<=0?t.setLives(t.lives):t.resetLevel()},this.restart=function(){t.lives=3,t.resetLevel()},this.resetLevel=function(){t.bullets=new Set([]),t.asteroids=new Set(Object(v.range)(4).map(function(e){var n=t.ship.getOffsetPoint(Object(v.random)(128,250,!1),Object(v.random)(360)),i=Object(o.a)(n,2),a=i[0],r=i[1];return new b({x:a,y:r})})),t.ship.dead=!1,t.ship.x.set(m.width/2),t.ship.y.set(m.height/2),t.ship.velocity=0,t.setLives(t.lives),t.setBullets(new Set(t.bullets)),t.setAsteroids(new Set(t.asteroids))},this.loop=function(){t.keyBuffer.forEach(t.handleKey),t.ship.render(),t.bullets.forEach(function(e){return e.render()}),t.asteroids.forEach(function(e){return e.render()}),t.paused||window.requestAnimationFrame(t.loop),t.asteroids.size<=0&&t.resetLevel()},this.ship=new p({x:m.width/2,y:m.height/2}),this.bullets=new Set([]),this.asteroids=new Set(Object(v.range)(4).map(function(e){var n=t.ship.getOffsetPoint(Object(v.random)(128,250,!1),Object(v.random)(360)),i=Object(o.a)(n,2),a=i[0],r=i[1];return new b({x:a,y:r})}))};w.start();var O=function(e){var t=e.x,n=e.y,a=e.angle,r=e.children;return i.createElement(c.a.div,{style:{x:t,y:n,rotate:a,position:"relative",width:0,height:0,display:"flex",placeItems:"center",placeContent:"center"}},r)},j=function(e){var t=e.x,n=e.y,a=e.angle,r=e.radius,s=void 0===r?100:r,c=i.useMemo(function(){var e=3+Math.floor(s/3),t=360/e,n=Object(v.range)(e).map(function(e){var n=Object(v.random)(.82,1)*s,i=e*t*Math.PI/180;return[n*Math.cos(i)+s,n*Math.sin(i)+s]}),i=Object(o.a)(n[0],2),a=i[0],r=i[1];return"M ".concat(a,",").concat(r," L ").concat(n.slice(1).map(function(e){return e.join(",")}).join(" ")," Z")},[]);return i.createElement(O,{x:t,y:n,angle:a},i.createElement("svg",{viewBox:"0 0 ".concat(2*s," ").concat(2*s),style:{width:2*s,height:2*s,position:"absolute"}},i.createElement("path",{d:c,fill:"none",strokeWidth:2,stroke:"#41FF00"})))},x=function(e){var t=e.x,n=e.y,a=e.angle,r=e.radius;return i.createElement(O,{x:t,y:n,angle:a},i.createElement("svg",{viewBox:"0 0 ".concat(2*r," ").concat(2*r),style:{width:2*r,height:2*r,transform:"rotate(90deg)",position:"absolute"}},i.createElement("path",{d:"M ".concat(r,",1 L ").concat(1.75*r,",").concat(1.5*r," ").concat(r,",").concat(2*r-1," ").concat(.25*r,",").concat(1.5*r," ").concat(r,",1 Z"),fill:"none",strokeWidth:2,strokeLinejoin:"round",strokeLinecap:"round",stroke:"#41FF00"})))},E=function(e){var t=e.x,n=e.y,a=e.angle,r=e.radius;return i.createElement(O,{x:t,y:n,angle:a},i.createElement("div",{style:{position:"absolute",height:2*r,width:2*r,borderRadius:"100%",backgroundColor:"#41FF00"}}))},k=function(e){var t=e.onClick;return i.createElement("div",null,i.createElement("h1",null,"Game Over"),i.createElement("button",{style:{all:"unset"},onClick:t},"Play Again"))},L=function(){var e=a.a.useState(w.asteroids),t=Object(o.a)(e,2),n=t[0],i=t[1],r=a.a.useState(w.bullets),s=Object(o.a)(r,2),l=s[0],u=s[1],d=a.a.useState(w.lives),h=Object(o.a)(d,2),f=h[0],v=h[1];return a.a.useEffect(function(){return w.setAsteroids=i,w.setBullets=u,w.setLives=v,window.addEventListener("keypress",w.handleKeyPress),window.addEventListener("keydown",w.handleKeyDown),window.addEventListener("keyup",w.handleKeyUp),function(){window.removeEventListener("keypress",w.handleKeyPress),window.removeEventListener("keydown",w.handleKeyDown),window.removeEventListener("keyup",w.handleKeyUp)}},[]),a.a.createElement("div",{className:"App",style:{display:"flex",flexDirection:"column",width:"100vw",height:"100vh",placeItems:"center",placeContent:"center",fontSize:32,color:"#41FF00",fontFamily:"VT323, monospace",backgroundColor:"#1e1f2c"}},a.a.createElement(c.a.div,{style:{height:m.height,width:m.width,border:"1px solid #41FF00",overflow:"hidden"}},f>0&&a.a.createElement(x,{x:w.ship.x,y:w.ship.y,angle:w.ship.angle,radius:w.ship.radius}),Array.from(l).map(function(e,t){var n=e.id,i=e.x,r=e.y,s=e.angle,o=e.radius;return a.a.createElement(E,{key:n,x:i,y:r,angle:s,radius:o})}),Array.from(n).map(function(e,t){var n=e.id,i=e.x,r=e.y,s=e.angle,o=e.radius;return a.a.createElement(j,{key:n,x:i,y:r,angle:s,radius:o})}),f<=0?a.a.createElement(k,{onClick:w.restart}):f),a.a.createElement("div",{style:{padding:16}},"W thrust | A left | D right | SPACE shoot"),a.a.createElement("div",{style:{padding:16}},a.a.createElement("a",{href:"https://twitter.com/steveruizok"},"@steveruizok")))};s.a.render(a.a.createElement(L,null),document.getElementById("root"))}},[[12,1,2]]]);
//# sourceMappingURL=main.fa61a0e2.chunk.js.map